{"version":3,"sources":["auto-reload.js","app.js"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */","let Marvel = {\n  init() {\n    this.search = instantsearch({\n      appId: 'O3F8QXYK6R',\n      apiKey: '78e45b023b7ff7d8ba88c59c9db19890',\n      indexName: 'marvel'\n    });\n\n    this.addSearchBoxWidget();\n    this.addStatsWidget();\n    this.addTeamsWidget();\n    this.addAuthorsWidget();\n    this.addPowersWidget();\n    this.addSpeciesWidget();\n    this.addHitsWidget();\n    this.addPaginationWidget();\n    this.addRefinementList();\n    this.renderHits();\n\n    this.search.start();\n  },\n  transformItem(data) {\n    // Add a default image if none exists\n    if (!data.image) {\n      data.image = './default.jpg';\n    }\n    data.image = data.image.replace(/^https?:/, '');\n\n    data.description = Marvel.getHighlightedValue(data, 'description');\n    data.name = Marvel.getHighlightedValue(data, 'name');\n    data.powersSummary = data.powers.slice(0, 5);\n    data.data = JSON.stringify(data);\n    \n    return data;\n  },\n  getHighlightedValue(object, property) {\n    if (!_.has(object, `_highlightResult.${property}.value`)) {\n      return object[property];\n    }\n    return object._highlightResult[property].value;\n  },\n  addSearchBoxWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.searchBox({\n        container: '#q',\n        placeholder: 'Search any superhero or supervillain'\n      })\n    );\n  },\n  addStatsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.stats({\n        container: '#stats'\n      })\n    );\n  },\n  addTeamsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#teams',\n        attributeName: 'teams',\n        operator: 'and',\n        limit: 10\n      })\n    );\n  },\n  addAuthorsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#authors',\n        attributeName: 'authors',\n        operator: 'and',\n        limit: 5\n      })\n    );\n  },\n  addSpeciesWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#species',\n        attributeName: 'species',\n        operator: 'or',\n        limit: 10\n      })\n    );\n  },\n  addPowersWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#powers',\n        attributeName: 'powers',\n        operator: 'and',\n        limit: 10\n      })\n    );\n  },\n  addHitsWidget() {\n    let hitTemplate = $('#hitTemplate').html();\n    let emptyTemplate = $('#noResultsTemplate').html();\n    this.search.addWidget(\n      instantsearch.widgets.hits({\n        container: '#hits',\n        hitsPerPage: 20,\n        templates: {\n          empty: emptyTemplate,\n          item: hitTemplate\n        },\n        transformData: {\n          item: Marvel.transformItem\n        }\n      })\n    );\n  },\n  addPaginationWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.pagination({\n        container: '#pagination',\n        cssClasses: {\n          active: 'active'\n        },\n        labels: {\n          previous: '<i class=\"fa fa-angle-left fa-2x\"></i> Previous page',\n          next: 'Next page <i class=\"fa fa-angle-right fa-2x\"></i>'\n        },\n        showFirstLast: false\n      })\n    );\n  },\n  addRefinementList(){\n    this.search.addWidget(\n      instantsearch.widgets.currentRefinedValues({\n        container: '#current-refined-values',\n        clearAll: 'after'\n      })\n    );\n  },\n  renderHits(){\n    var renderedHits = {\n      render: function(options) {\n        processHeroProfile();\n      }\n    };\n\n    this.search.addWidget(renderedHits);\n  }\n\n};\n\nexport default Marvel;\n\nfunction processHeroProfile(){\n\n  var hit = $('.btn-profile'),\n      results = $('.hits'),\n      profile = $('.hero-profile'),\n      profileHeader = $('.hero-profile header'),\n      profileName = $('.hero-profile .hero-name'),\n      profileRealName = $('.hero-profile .hero-secret-identity'),\n      profileAvatar = $('.hero-profile .hero-avatar img'),\n      profileDescription = $('.hero-profile .hero-description'),\n      profilePartners = $('.hero-profile .hero-partners'),\n      profileHeroVillain = $('.hero-profile .factions'),\n      profilePowers = $('.hero-profile .hero-powers');\n\n      // Add dynamic style tag\n      profileHeader.prepend('<style id=\"dynamic-style\" />');\n      var dynamicStyle = $('#dynamic-style');\n\n  \n  hit.each(function(){\n    $(this).click(function(e,t){\n      e.preventDefault();\n      var $this = $(this);\n      var datas = $(this).closest('.hit').find('.dump').val(),\n          datas = $.parseJSON(datas);\n\n      \n      // Fetch & define values\n      var\n      heroName = datas.name,\n      heroSecretId = datas.secretIdentities[0],\n      heroAvatar = datas.images.thumbnail,\n      heroBanner = datas.images.banner,\n      heroBackground = datas.images.background || 'http://i.annihil.us/u/prod/marvel/i/mg/c/50/537bafe4149ad.gif',\n      heroDesc = datas.description,\n      heroPowers = datas.powers,\n      heroPartners = datas.partners,\n      isHero = datas.isHero,\n      isVillain = datas.isVillain;\n\n      if (_.has(datas, 'mainColor.hexa')) {\n        var heroColor = colorLuminance('#' + datas.mainColor.hexa, 1.5);\n      } else {\n        var heroColor = '#ccc'\n      }\n\n      // Appy them\n      profileName.html(heroName);\n      profileAvatar.attr('src', heroAvatar);\n      profileDescription.html('<p>'+heroDesc+'</p>');\n      profileRealName.html(heroSecretId);\n\n\n\n\n      // Add the proper colors\n      profileAvatar.parent().attr('style','border-color:'+ heroColor);\n      dynamicStyle.text('').text('.hero-profile header:after{background-color:'+heroColor+';}.hero-profile .hero-faction:before,.hero-profile .hero-faction:after{background: linear-gradient(to bottom, '+heroColor+', '+  colorLuminance(heroColor, 1.5)+') !important}')\n\n\n      // Give the profile header the proper images\n      profileHeader.attr('style','background-image:url(' + heroBackground + ');border-color:' + heroColor);\n\n      // Check if he is a hero, a vilain, both, or null\n      if(isHero && !isVillain) {\n        profileHeroVillain.attr({\n          'data-is-hero': 'true',\n          'data-is-villain': 'false'\n        })\n      }\n      if(isVillain && !isHero) {\n        profileHeroVillain.attr({\n          'data-is-hero': 'false',\n          'data-is-villain': 'true'\n        })\n      }\n      if(!isHero && !isVillain) {\n        profileHeroVillain.attr({\n          'data-is-hero': 'true',\n          'data-is-villain': 'true'\n        })\n      }\n      if(isHero===null && isVillain===null){\n        profileHeroVillain.attr({\n          'data-is-hero': 'false',\n          'data-is-villain': 'false'\n        })\n      }\n\n\n      // Loop & wrap all the powers\n      profilePowers.html('');\n      var power = '';\n      $.each(heroPowers, function (index, key){\n        power += \"<span class='power'>\"+key+\"</span>\"; \n      });\n      profilePowers.append(power);\n      \n      // Loop & wrap all the partners\n      profilePartners.html('');\n      var partner = '';\n      if(heroPartners===0){\n        partner += \"<span>Unknown</span>\"\n      } else {\n        $.each(heroPartners, function (index, key){\n          partner += \"<span class='partner'>\"+key+\"</span>, \"; \n        });\n      }\n      profilePartners.append(partner);\n\n\n      \n      if(!results.hasClass('open')){\n        results.addClass('open')\n        profile.addClass('shown')\n      }\n    });\n  })\n}\n\n\nfunction colorLuminance(hex, lum) {\n\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, '');\n  if (hex.length < 6) {\n    hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];\n  }\n  lum = lum || 0;\n\n  // convert to decimal and change luminosity\n  var rgb = \"#\", c, i;\n  for (i = 0; i < 3; i++) {\n    c = parseInt(hex.substr(i*2,2), 16);\n    c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);\n    rgb += (\"00\"+c).substr(c.length);\n  }\n\n  return rgb;\n}\n// function imageDimensions($url) {\n//   var u = $url;\n\n// }\n///////////////////////////\n/// Toggle hero-profile \\\\\\ \n///////////////////////////\n// function processHeroProfile(){\n//   var hit = document.querySelectorAll('.hit'),\n//       results = document.querySelector('.hits'),\n//       profile = document.querySelector('.hero-profile');\n//   for(var i=0;i<hit.length;i++){\n//     hit[i].addEventListener('click', function(){\n//       alert()\n//       if(!results.classList.contains('open')){\n//         results.classList.add('open')\n//         profile.classList.add('shown')\n//       } else {\n//         results.classList.remove('open')\n//         profile.classList.remove('shown')\n//       }\n//     })\n//   }\n// }\n\n\n// window.onload = function(){\n//   processHeroProfile()\n// }\n\n\n\n\n\n\n// // Returns the Marvel image if available, otherwise the one from Wikipedia.\n// // Back to default if none is found\n// function getImage(record) {\n//   if (record.marvel && record.marvel.image) {\n//     return record.marvel.image;\n//   }\n//   if (record.image.url) {\n//     return record.image.url;\n//   }\n//   return 'https://pixelastic.github.io/marvel/default.jpg';\n// }\n// \n// // Returns Marvel description if found, list of powers otherwise\n// function getDescription(record) {\n//   // Si description on l'affiche\n//   // sinon on affiche le power text\n//   if (record.marvel && record.marvel.description) {\n//     if (record._highlightResult.marvel.description) {\n//       return record._highlightResult.marvel.description.value;\n//     }\n//     return record.marvel.description;\n//   }\n//   return record.powersText.join('<br>');\n// }\n// \n// \n// search.addWidget(\n//   instantsearch.widgets.hits({\n//     container: '#hits',\n//     hitsPerPage: 80,\n//     templates: {\n//       empty: noResultsTemplate,\n//       item: hitTemplate\n//     },\n//     transformData: {\n//       item: function (data) {\n//         if (data.creators) {\n//           data.creators = data.creators.join(', ');\n//         }\n//         if (data.species) {\n//           data.species = data.species.join(', ');\n//         }\n// \n//         data.description = getDescription(data);\n// \n//         // Use cloudinary to load smaller images\n//         var cloudinaryPrefix = 'http://res.cloudinary.com/pixelastic-marvel/image/fetch/h_190,q_100,c_scale,f_auto/';\n//         data.image = cloudinaryPrefix + getImage(data);\n// \n//         return data;\n//       }\n//     }\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.stats({\n//     container: '#stats'\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#creators',\n//     attributeName: 'creators',\n//     operator: 'and',\n//     limit: 10\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#teams',\n//     attributeName: 'teams',\n//     operator: 'and',\n//     limit: 8\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#species',\n//     attributeName: 'species',\n//     operator: 'and',\n//     limit: 5\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#powers',\n//     attributeName: 'powers',\n//     operator: 'and',\n//     limit: 8\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.pagination({\n//     container: '#pagination',\n//     cssClasses: {\n//       active: 'active'\n//     },\n//     labels: {\n//       previous: '<i class=\"fa fa-angle-left fa-2x\"></i> Previous page',\n//       next: 'Next page <i class=\"fa fa-angle-right fa-2x\"></i>'\n//     },\n//     showFirstLast: false\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.clearAll({\n//     container: '#clear-all',\n//     templates: {\n//       link: '<i class=\"fa fa-eraser\"></i> Clear all filters'\n//     },\n//     cssClasses: {\n//       root: 'btn btn-block btn-default'\n//     },\n//     autoHideContainer: true\n//   })\n// );\n// \n// search.start();\n// \n// $('#q').focus();\n"]}
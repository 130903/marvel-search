{"version":3,"sources":["auto-reload.js","app.js"],"names":[],"mappings":"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","file":"public/app.js","sourcesContent":["/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */","let Marvel = {\n  init() {\n    this.search = instantsearch({\n      appId: 'O3F8QXYK6R',\n      apiKey: '78e45b023b7ff7d8ba88c59c9db19890',\n      indexName: 'marvel',\n      urlSync: true\n    });\n\n    this.addSearchBoxWidget();\n    this.addStatsWidget();\n    this.addTeamsWidget();\n    this.addAuthorsWidget();\n    this.addPowersWidget();\n    this.addSpeciesWidget();\n    this.addHitsWidget();\n    this.addPaginationWidget();\n\n    this.search.start();\n  },\n  transformItem(data) {\n    // Add a default image if none exists\n    if (!data.image) {\n      data.image = './default.jpg';\n    }\n    return data;\n  },\n  getHighlightedValue(object, property) {\n    if (!_.has(object, `_highlightResult.${property}.value`)) {\n      return object[property];\n    }\n    return object._highlightResult[property].value;\n  },\n  addSearchBoxWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.searchBox({\n        container: '#q',\n        placeholder: 'Search any superhero or supervillain'\n      })\n    );\n  },\n  addStatsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.stats({\n        container: '#stats'\n      })\n    );\n  },\n  addTeamsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#teams',\n        attributeName: 'teams',\n        operator: 'and',\n        limit: 10\n      })\n    );\n  },\n  addAuthorsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#authors',\n        attributeName: 'authors',\n        operator: 'and',\n        limit: 5\n      })\n    );\n  },\n  addSpeciesWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#species',\n        attributeName: 'species',\n        operator: 'or',\n        limit: 10\n      })\n    );\n  },\n  addPowersWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#powers',\n        attributeName: 'powers',\n        operator: 'and',\n        limit: 10\n      })\n    );\n  },\n  addHitsWidget() {\n    let hitTemplate = $('#hitTemplate').html();\n    let emptyTemplate = $('#noResultsTemplate').html();\n    this.search.addWidget(\n      instantsearch.widgets.hits({\n        container: '#hits',\n        hitsPerPage: 20,\n        templates: {\n          empty: emptyTemplate,\n          item: hitTemplate\n        },\n        transformData: {\n          item: Marvel.transformItem\n        }\n      })\n    );\n  },\n  addPaginationWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.pagination({\n        container: '#pagination',\n        cssClasses: {\n          active: 'active'\n        },\n        labels: {\n          previous: '<i class=\"fa fa-angle-left fa-2x\"></i> Previous page',\n          next: 'Next page <i class=\"fa fa-angle-right fa-2x\"></i>'\n        },\n        showFirstLast: false\n      })\n    );\n  }\n};\n\nexport default Marvel;\n\n\n\n\n\n\n\n\n\n\n// // Returns the Marvel image if available, otherwise the one from Wikipedia.\n// // Back to default if none is found\n// function getImage(record) {\n//   if (record.marvel && record.marvel.image) {\n//     return record.marvel.image;\n//   }\n//   if (record.image.url) {\n//     return record.image.url;\n//   }\n//   return 'https://pixelastic.github.io/marvel/default.jpg';\n// }\n// \n// // Returns Marvel description if found, list of powers otherwise\n// function getDescription(record) {\n//   // Si description on l'affiche\n//   // sinon on affiche le power text\n//   if (record.marvel && record.marvel.description) {\n//     if (record._highlightResult.marvel.description) {\n//       return record._highlightResult.marvel.description.value;\n//     }\n//     return record.marvel.description;\n//   }\n//   return record.powersText.join('<br>');\n// }\n// \n// \n// search.addWidget(\n//   instantsearch.widgets.hits({\n//     container: '#hits',\n//     hitsPerPage: 80,\n//     templates: {\n//       empty: noResultsTemplate,\n//       item: hitTemplate\n//     },\n//     transformData: {\n//       item: function (data) {\n//         if (data.creators) {\n//           data.creators = data.creators.join(', ');\n//         }\n//         if (data.species) {\n//           data.species = data.species.join(', ');\n//         }\n// \n//         data.description = getDescription(data);\n// \n//         // Use cloudinary to load smaller images\n//         var cloudinaryPrefix = 'http://res.cloudinary.com/pixelastic-marvel/image/fetch/h_190,q_100,c_scale,f_auto/';\n//         data.image = cloudinaryPrefix + getImage(data);\n// \n//         return data;\n//       }\n//     }\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.stats({\n//     container: '#stats'\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#creators',\n//     attributeName: 'creators',\n//     operator: 'and',\n//     limit: 10\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#teams',\n//     attributeName: 'teams',\n//     operator: 'and',\n//     limit: 8\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#species',\n//     attributeName: 'species',\n//     operator: 'and',\n//     limit: 5\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.refinementList({\n//     container: '#powers',\n//     attributeName: 'powers',\n//     operator: 'and',\n//     limit: 8\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.pagination({\n//     container: '#pagination',\n//     cssClasses: {\n//       active: 'active'\n//     },\n//     labels: {\n//       previous: '<i class=\"fa fa-angle-left fa-2x\"></i> Previous page',\n//       next: 'Next page <i class=\"fa fa-angle-right fa-2x\"></i>'\n//     },\n//     showFirstLast: false\n//   })\n// );\n// \n// search.addWidget(\n//   instantsearch.widgets.clearAll({\n//     container: '#clear-all',\n//     templates: {\n//       link: '<i class=\"fa fa-eraser\"></i> Clear all filters'\n//     },\n//     cssClasses: {\n//       root: 'btn btn-block btn-default'\n//     },\n//     autoHideContainer: true\n//   })\n// );\n// \n// search.start();\n// \n// $('#q').focus();\n"]}